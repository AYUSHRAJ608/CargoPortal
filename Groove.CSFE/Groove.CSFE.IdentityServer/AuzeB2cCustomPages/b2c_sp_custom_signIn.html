<html>

<head>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans|Noto+Serif|Nunito|Open+Sans|Quicksand" rel="stylesheet" />

    <!-- QC cargoportalstorage.blob.core.windows.net -->
    <!-- Staging uatshipmentportal.blob.core.windows.net -->
    <!-- PRD cargofecsportal.blob.core.windows.net -->

    <link href="https://cargoportalstorage.blob.core.windows.net/shipmentportalb2cui/images/favicon.ico" rel="icon" type="image/x-icon" />
    <link href="https://cargoportalstorage.blob.core.windows.net/shipmentportalb2cui/styles/b2c_sp_custom_style.css" rel="stylesheet" />
    <link href="https://cargoportalstorage.blob.core.windows.net/shipmentportalb2cui/styles/b2c_sp_custom_signIn_style.css" rel="stylesheet" />

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!--Global site tag (gtag.js) - Google Analytics-->
    <!--Local G-XKXS3HDXBK-->
    <!--QC G-HKLLNZV41B-->
    <!--Staging G-V8JJZ4ELX8-->
    <!--PRD G-NW6JCBMTNR-->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HKLLNZV41B"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-HKLLNZV41B', { send_page_view: false, debug_mode: true });
    </script>

    <title>Shipment Portal - Sign In</title>

    <style type="text/css">
        .field-icon {
            float: right;
            cursor: pointer;
            margin-right: 15px;
            margin-top: -30px;
            position: relative;
            z-index: 2;
            font-weight: inherit;
        }
    </style>

</head>

<body>
    <div id="background_branding_container">
        <img id="background_background_image" src="https://cargoportalstorage.blob.core.windows.net/shipmentportalb2cui/images/ship.png" alt="Illustration">
    </div>
    <div>
        <div id="panel" class="panel">

            <div class="api_container normaltext">

                <div class="inner_container">
                    <img src="https://cargoportalstorage.blob.core.windows.net/shipmentportalb2cui/images/logo_v2.png" height="70" class="logo" />

                    <div id="api" data-name="Unified">

                        <div class="localAccount" role="form">
                            <div class="intro">
                                <h2 class="text_signIn">
                                    Sign in to Cargo
                                </h2>
                            </div>
                            <div class="error pageLevel" aria-hidden="true" style="display: none;">
                                <p role="alert"></p>
                            </div>
                            <div class="entry">
                                <div class="entry-item">

                                    <div class="error itemLevel" aria-hidden="true" style="display: none;">
                                        <p role="alert"></p>
                                    </div>
                                    <input type="email" class="form-control input-normal" id="logonIdentifier" name="Username or email address" pattern="^[a-zA-Z0-9.!#$%&amp;’'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$"
                                           placeholder="Enter your email" value="" tabindex="1">
                                </div>
                                <div class="entry-item">

                                    <div class="error itemLevel" aria-hidden="true" style="display: none;">
                                        <p role="alert"></p>
                                    </div>
                                    <div>
                                        <input type="password" id="password" name="Password" placeholder="Enter your password" tabindex="1">
                                    </div>
                                </div>
                                <div class="entry-item">
                                    <a tabindex="2" id="forgotPassword" href="/glogistics.onmicrosoft.com/B2C_1_B2C_SU_SI_AD_FB/api/CombinedSigninAndSignup/forgotPassword?csrf_token=ejBHcnN5ckFTek1ndGk0T2pyUmRkemJYdUszdGM1WGwwSE0vLzdCT1VNa1ZJRDVvdkdGdko2dW1wQ252Z2JvekY4TXFTOFY1WG9VNCs4U2ExS1kycEE9PTsyMDE4LTEyLTMxVDEwOjIyOjAxLjQwNDQxMjdaOy80N1VRcHVXZE5qZEk0Qlk0TU5YUEE9PTt7Ik9yY2hlc3RyYXRpb25TdGVwIjoxfQ==&tx=StateProperties=eyJUSUQiOiI4NTk2MDA4Ni00MmE0LTRiZGUtODZlNi02MjljNWI2ODBjYTcifQ&p=B2C_1_B2C_SU_SI_AD_FB">Forgot password?</a>
                                </div>
                                <div class="buttons">
                                    <button id="next" tabindex="1">Sign in</button>
                                </div>
                            </div>

                            <div class="divider">
                                <h2>OR</h2>
                            </div>
                            <div class="create">
                                <p>
                                    Don't have an account?
                                    <a id="createAccount" tabindex="1" href="/glogistics.onmicrosoft.com/B2C_1_B2C_SU_SI_AD_FB/api/CombinedSigninAndSignup/unified?local=signup&amp;csrf_token=V2dJN2g1MzloRzVqbUNMa0t2ZWtldlZhVUtLR0FOWDJzYlpxUEI2bTZoOUthd0NIbmV0SXVuenZyZ0tpVlJvMUE1YXBjcmRsUlhPZFd3Tk80YmdOdEE9PTsyMDE5LTAxLTAyVDA5OjAxOjEzLjIwMTUwNTFaO2w1anQ5VUMyM2ZwKzNnV0p1dXF2WXc9PTt7Ik9yY2hlc3RyYXRpb25TdGVwIjoxfQ==&amp;tx=StateProperties=eyJUSUQiOiJlYTIyOGI3MC0xZTY0LTRjNTAtODA4Mi03ZGI4YmRhZDAyZWQifQ&amp;p=B2C_1_B2C_SU_SI_AD_FB">Sign up</a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">

        (function () {
                        
            // Auto fulfill username and password
            var username = getParameterByName('username');
            var password = getParameterByName('password');

            if (username !== null && username !== undefined && username !== '' && password !== null && password !== undefined && password !== '') {
                document.getElementById("logonIdentifier").value = username;
                document.getElementById("password").value = password;

                setTimeout(function () { document.getElementById('next').click(); }, 1000);

            }

            // Add toogle password visibility
            var passwordToogleElement = document.createElement('span');
            passwordToogleElement.id = 'passwordToogle';
            passwordToogleElement.className = 'fa fa-fw fa-eye field-icon';
            passwordToogleElement.addEventListener('click', tooglePassword);
            var passwordElement = document.getElementById('password');
            passwordElement.parentNode.insertBefore(passwordToogleElement, passwordElement.nextSibling);

            // Add fake next button, user click on it to fire GA tag then login
            // Hide real login button
            var nextButtonElement = document.getElementById('next');
            nextButtonElement.classList.add('hidden');


            // Create fake login button
            var fakeNextButtonElement = document.createElement('button')
            fakeNextButtonElement.id = 'fake-next';
            fakeNextButtonElement.tabIndex = 2;
            fakeNextButtonElement.innerHTML = nextButtonElement.innerHTML;
            nextButtonElement.parentNode.insertBefore(fakeNextButtonElement, nextButtonElement.nextSibling);

            // Add event click
            document.getElementById('fake-next').addEventListener('click', function () {
                gtag('event', 'sign_in', {
                    event_category: 'Sign In',
                    event_action: "Sign In",
                    event_label: null,
                    event_value: null,
                    event_callback: function () {
                        // callback, fire login process
                        document.getElementById("next").click();
                    }
                })
            });

            // Change page title with current locale
            var currentLocale = document.documentElement.lang;
            switch (currentLocale) {
                case 'zh-Hant':
                    document.title = 'Shipment Portal - 登錄';
                    break;
                case 'zh-Hans':
                    document.title = 'Shipment Portal - 登录';
                    break;
            }

        })();

        function tooglePassword() {

            var passwordToogleElement = document.getElementById('passwordToogle');
            var passwordElement = document.getElementById('password');
            var attributeVale = passwordElement.getAttribute('type');
            if (attributeVale === 'text') {
                passwordToogleElement.classList.remove('fa-eye-slash');
                passwordElement.setAttribute('type', 'password');
            } else {
                passwordToogleElement.classList.add('fa-eye-slash');
                passwordElement.setAttribute('type', 'text');
            }

        }

        function getParameterByName(name, url = window.location.href) {

            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(url);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));

        }
    </script>

</body>

</html>